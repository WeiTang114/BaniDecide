<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Sample</title>

  <!-- SDK dependency -->
  <script src="http://www.parsecdn.com/js/parse-1.3.4.min.js"></script>
</head>

<body>
	<!-- Parse Initialization: must be the FIRST script-->
  <script>
  	var appId = "EeGKlcEmDhT5SMjQhs6iRaYdIIohsM6rGWNn9iP2";
  	var jsKey = "CEnbro29EZJaKvRqIdpH46yaJcfk8UTdEspS5Qrm";
  	Parse.initialize(appId, jsKey);
 	</script>

 	請開啟console並配合code~
 	<button onclick="test()">TestSDK</button>
 	<button onclick="testGetQuestion()">TestGetQuestion</button>
 	<button onclick="testAddQuestion()">TestAddQuestion</button>
 	<button onclick="testSelectItem()">TestSelectItem</button>

 	<script>
 		function test() {
	  	var TestObject = Parse.Object.extend("TestObject");
			var testObject = new TestObject();
			testObject.save({foo: "bar"}).then(function(object) {
			  alert("yay! it worked");
			},function(error) {
				alert("OH failed");
			});
		}

		function testGetQuestion() {
			var theQid = "q3yq9juWU0"; // 暫時放的假問題的ID~
			Parse.Cloud.run("getQuestion", {qid: theQid}).then(function(respStr) {
				console.log(respStr);
				var resp = JSON.parse(respStr);
				var question = resp.items[0];
				var options = resp.items.slice(1, 1+4);
				var numbers = resp.numbers;

				console.log("question:" + question + ", options:" + options + ", numbers:" + numbers);
			}, function(error) {
				console.log(JSON.stringify(error));
			});
		}

		function testAddQuestion() {
			var question = "新年快樂";
			var options = ["快樂", "不快樂", "很爽", "沒差吧"];
			var theItems = [question].concat(options);
			Parse.Cloud.run("addQuestion", {items: theItems}).then(function(respStr) {
				var resp = JSON.parse(respStr);
				var qid = resp.qid;
				console.log("new qid=" + qid);
			}, function(error) {
				console.log(JSON.stringify(error));
			});
		}

		function testSelectItem() {
			var theUid = "abc"; //whatever
			var theQid = "q3yq9juWU0"; // 和testGetQUestion同一題
			var theNumber = 0;  // 0~3
			Parse.Cloud.run("selectItem", 
				{uid: theUid, qid: theQid, number: theNumber}
			).then(function(respStr) {
				console.log(respStr);
			}, function(error) {
				console.log(JSON.stringify(error));
			});

		}
	</script>



</body>
</html>